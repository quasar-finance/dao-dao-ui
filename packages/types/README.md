# @dao-dao/types

A collection of types used across packages.

## Layout

| Location                                                   | Summary                                                                                                         |
| ---------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- |
| [components](./components)                                 | Types related to both stateless and stateful components and the respective packages.                            |
| [contracts](./contracts)                                   | Smart contract types generated by [`@cosmwasm/ts-codegen`](https://github.com/CosmWasm/ts-codegen).             |
| [protobuf](./protobuf)                                     | Protobuf types generated by [`@cosmology/telescope`](https://github.com/cosmology-tech/telescope).              |
| [actions.ts](./actions.ts)                                 | Types related to the [`@dao-dao/stateful/actions`](../stateful/actions) system.                                 |
| [chain.ts](./chain.ts)                                     | Types related to the chain.                                                                                     |
| [command.ts](./command.ts)                                 | Types related to the [`@dao-dao/stateful/command`](../stateful/command) system.                                 |
| [dao.ts](./dao.ts)                                         | Types related to DAOs.                                                                                          |
| [helpers.ts](./helpers.ts)                                 | Helper types.                                                                                                   |
| [inbox.ts](./inbox.ts)                                     | Types related to the inbox.                                                                                     |
| [nft.ts](./nft.ts)                                         | Types related to NFTs.                                                                                          |
| [proposal-module-adapter.ts](./proposal-module-adapter.ts) | Types related to the [`@dao-dao/stateful/proposal-module-adapter`](../stateful/proposal-module-adapter) system. |
| [proposal.ts](./proposal.ts)                               | Types related to proposals.                                                                                     |
| [state.ts](./state.ts)                                     | Types related to the [`@dao-dao/state`](../state) package.                                                      |
| [units.ts](./units.ts)                                     | Types related to units.                                                                                         |
| [voting-module-adapter.ts](./voting-module-adapter.ts)     | Types related to the [`@dao-dao/stateful/voting-module-adapter`](../stateful/voting-module-adapter) system.     |
| [wallet.ts](./wallet.ts)                                   | Types related to wallets.                                                                                       |

## Protobufs

This package contains Cosmos SDK protobuf definitions generated by Cosmology's
[Telescope](https://github.com/cosmology-tech/telescope).

To generate protobufs:

```bash
yarn protobuf
```

Sometimes definitions need to be manually fixed due to bugs and other
discrepancies. There is a patch file that records these modifications in
`protobuf/patches.diff`.

To update the patch file when new changes are made:

1. Commit the changes so that the current branch is up-to-date with the desired
   changes.

2. Run:

   ```bash
   yarn protobuf:patch:update
   ```

   This will regenerate the protobufs, undoing all patches. Then, it records
   the reverse diff between the committed changes and the regenerated protobufs
   (since we want to undo the current changes). Lastly, it reapplies the latest
   patches, and all changes should be made. If this works, only the
   `patches.diff` file should have changes.

3. Update the previous commit with the new patches.

   ```bash
   git add protobuf/patches.diff
   git commit --amend
   ```
